<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <title>SKF 5S</title>
  <link rel="manifest" href="manifest.json" />
  <link rel="icon" href="assets/skf-192.png" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header class="app-header">
    <div class="logo">
      <img src="assets/skf-logo.png" alt="SKF" />
      <h1>SKF 5S</h1>
    </div>
    <div class="actions">
      <button id="btnNewArea" class="btn">+ Nuova linea</button>
      <button id="btnExport" class="btn ghost">Esporta</button>
      <label for="fileImport" class="btn ghost">Importa</label>
      <input id="fileImport" type="file" accept="application/json" hidden />
      <button id="btnPrint" class="btn ghost">Stampa</button>
      <button id="btnTheme" class="btn ghost">ðŸŒž Tema</button>
    </div>
  </header>

  <!-- Intro -->
  <section class="card intro-grid">
    <img src="assets/5s-hero.png" class="hero-img" alt="Diagramma 5S" loading="lazy" decoding="async" />
    <div>
      <h2>Cosa Ã¨ 5S</h2>
      <p>5S Ã¨ un metodo per fornire un posto di lavoro <b>sicuro</b>, <b>ben organizzato</b> e <b>pulito</b>, per fare il nostro lavoro facilmente e correttamente la prima volta.</p>
      <p class="legend5s">
        <span class="tag" data-s="1S">1S Selezionare</span> â€” Avere solo ciÃ² che serve, eliminare il superfluo.<br />
        <span class="tag" data-s="2S">2S Sistemare</span> â€” Un posto per tutto e tutto al suo posto.<br />
        <span class="tag" data-s="3S">3S Splendere</span> â€” Pulire e rimuovere le cause dello sporco.<br />
        <span class="tag" data-s="4S">4S Standardizzare</span> â€” Regole e segnali visivi chiari.<br />
        <span class="tag" data-s="5S">5S Sostenere</span> â€” Disciplina, abitudine e miglioramento continuo.
      </p>
    </div>
  </section>

  <!-- Filtri -->
  <section class="card controls">
    <div class="filters">
      <input id="q" class="f-q" placeholder="ðŸ”Ž Cerca in descrizione / note / responsabileâ€¦" />
      <select id="lineFilter" class="f-line" title="Linea"></select>

      <!-- Bottoni settore (desktop / tablet) -->
      <div class="sector-toggles f-seg">
        <button id="btnAll" class="btn seg active">Tutti</button>
        <button id="btnFgr" class="btn seg">Rettifica</button>
        <button id="btnAsm" class="btn seg">Montaggio</button>
      </div>
      <!-- Select settore (mobile) -->
      <select id="sectorFilter" class="f-seg-select" title="Settore">
        <option value="ALL">Settore: Tutti</option>
        <option value="Rettifica">Rettifica</option>
        <option value="Montaggio">Montaggio</option>
      </select>

      <label class="onlylate f-late"><input type="checkbox" id="onlyLate" /> Solo in ritardo</label>
      <button id="btnClearFilters" class="btn ghost f-clear">Pulisci</button>
    </div>
  </section>

  <!-- Cruscotto + grafico -->
  <section class="card">
    <div class="kpis">
      <div class="kpi"><div>Linee</div><div id="kpiAreas">0</div></div>
      <div class="kpi"><div>Punteggio medio</div><div id="kpiScore">0%</div></div>
      <div class="kpi"><div>Azioni in ritardo</div><div id="kpiLate">0</div></div>
    </div>

    <div class="chart-toolbar">
      <div class="left">
        <button id="zoomOut" class="btn tiny">âˆ’</button>
        <button id="zoomIn" class="btn tiny">+</button>
      </div>
      <label class="stacked"><input type="checkbox" id="toggleStacked" /> Stacked</label>
    </div>

    <div class="chart-scroll">
      <div class="chart-inner">
        <canvas id="chartAreas" height="260"></canvas>
      </div>
    </div>

    <div id="lateList" class="late-list" style="display:none"></div>

    <div class="score-legend">
      <span class="dot0">0</span> Non conforme
      <span class="dot1">1</span> Parziale
      <span class="dot3">3</span> Quasi ok
      <span class="dot5">5</span> Conforme
    </div>

    <!-- NAV Linee -->
    <div id="areasList" class="line-buttons"></div>

    <!-- Global expand/collapse -->
    <div class="global-toggle">
      <button id="btnCollapseAll" class="btn ghost">Comprimi tutto</button>
      <button id="btnExpandAll" class="btn ghost">Espandi tutto</button>
    </div>
  </section>

  <!-- Schede -->
  <section id="areas"></section>

  <!-- Template area -->
  <template id="tplArea">
    <div class="card area">
      <div class="area-head">
        <div>
          <div class="lbl">Linea</div>
          <input class="area-line" placeholder="es. CH 2" />
        </div>
        <div class="area-metrics">
          <div>Punteggio: <span class="badge-s score-val" data-s="5S">0%</span></div>
          <div>Predominante: <span class="badge-s doms" data-s="1S">1S 0%</span></div>
        </div>
        <div class="area-actions">
          <button class="btn ghost add-item">+ Voce</button>
          <button class="btn ghost collapse">Comprimi</button>
          <button class="btn danger delete-area">Elimina</button>
        </div>
      </div>

      <div class="sector-tabs">
        <button class="tab sec active" data-sector="Rettifica">Rettifica</button>
        <button class="tab sec" data-sector="Montaggio">Montaggio</button>
      </div>

      <div class="s-tabs">
        <button class="tab s active" data-s="1S">1S <span class="badge-s score-1S" data-s="1S">0%</span></button>
        <button class="tab s" data-s="2S">2S <span class="badge-s score-2S" data-s="2S">0%</span></button>
        <button class="tab s" data-s="3S">3S <span class="badge-s score-3S" data-s="3S">0%</span></button>
        <button class="tab s" data-s="4S">4S <span class="badge-s score-4S" data-s="4S">0%</span></button>
        <button class="tab s" data-s="5S">5S <span class="badge-s score-5S" data-s="5S">0%</span></button>
      </div>

      <div class="s-panels">
        <div class="panel active" data-s="1S"></div>
        <div class="panel" data-s="2S"></div>
        <div class="panel" data-s="3S"></div>
        <div class="panel" data-s="4S"></div>
        <div class="panel" data-s="5S"></div>
      </div>
    </div>
  </template>

  <!-- Template item -->
  <template id="tplItem">
    <div class="item">
      <button class="btn tiny info" title="Dettaglio">i</button>
      <input class="txt" placeholder="Titoloâ€¦" />
      <div class="points-dots" role="radiogroup" aria-label="Punteggio">
        <button class="dot v0" data-val="0" title="0">0</button>
        <button class="dot v1" data-val="1" title="1">1</button>
        <button class="dot v3" data-val="3" title="3">3</button>
        <button class="dot v5" data-val="5" title="5">5</button>
      </div>
      <input class="resp" placeholder="Responsabile" />
      <input class="due" type="date" title="Scadenza" />
      <input class="note" placeholder="Noteâ€¦" />
      <button class="btn tiny del" title="Elimina">Ã—</button>
    </div>
    <div class="desc-show" style="display:none"></div>
  </template>

  <footer>
    <p>Â© SKF â€“ PWA offline Â· <span id="appVersion"></span></p>
  </footer>

  <script src="app.js"></script>
  <script>if('serviceWorker' in navigator){navigator.serviceWorker.register('sw.js');}</script>
</body>
</html>
