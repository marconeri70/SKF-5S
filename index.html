<!doctype html>
<html lang="it" data-theme="light">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <meta name="theme-color" content="#0f6bd2" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">

  <title>SKF 5S</title>
  <link rel="manifest" href="manifest.json" />
  <link rel="icon" href="assets/skf-192.png" />
  <link rel="apple-touch-icon" href="assets/skf-192.png" />
  <link rel="stylesheet" href="style.css?v=7.10" />

  <!-- Chart.js + datalabels -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.3/dist/chart.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.2.0/dist/chartjs-plugin-datalabels.min.js"></script>
</head>
<body>
  <header class="brand">
    <div class="brand-left">
      <img src="assets/skf-logo.png" alt="SKF" class="logo" />
      <h1>SKF 5S</h1>
      <small class="muted">â€“ audit & checklist</small>
    </div>
    <nav class="actions">
      <button id="btnNew" class="btn primary">+ Nuova linea</button>
      <button id="btnExport" class="btn">Esporta</button>
      <button id="btnImport" class="btn">Importa</button>
      <button id="btnPrint" class="btn">Stampa</button>
      <button id="btnTheme" class="btn icon" title="Tema">ðŸŒ“</button>
    </nav>
  </header>

  <!-- Intro: immagine 3D + spiegazione -->
  <section class="intro card">
    <img src="assets/5s-hero.png" alt="5S" class="hero" />
    <div class="intro-text">
      <h2>Cosa Ã¨ 5S</h2>
      <p>5S Ã¨ un metodo per fornire un posto di lavoro <b>sicuro</b>, <b>ben organizzato</b> e <b>pulito</b>,
        per fare il nostro lavoro facilmente e correttamente la prima volta.</p>

      <ul class="bullets">
        <li><span class="chip s1">1S Selezionare</span> â€” Avere solo ciÃ² che serve, eliminare il superfluo.</li>
        <li><span class="chip s2">2S Sistemare</span> â€” Un posto per tutto e tutto al suo posto.</li>
        <li><span class="chip s3">3S Splendere</span> â€” Pulire e rimuovere le cause dello sporco.</li>
        <li><span class="chip s4">4S Standardizzare</span> â€” Regole e segnali visivi chiari.</li>
        <li><span class="chip s5">5S Sostenere</span> â€” Disciplina, abitudine e miglioramento continuo.</li>
      </ul>
    </div>
  </section>

  <!-- Filtri compatti -->
  <section class="controls card">
    <div class="filters">
      <div class="field grow">
        <span class="icon">ðŸ”Ž</span>
        <input id="q" type="search" placeholder="Cerca in descrizione / note / responsabileâ€¦" />
      </div>

      <div class="field">
        <label class="lbl">Linea</label>
        <select id="selLine"></select>
      </div>

      <div class="field pills">
        <label class="lbl">Settore</label>
        <div class="pillset" id="sectorPills">
          <button class="pill active" data-sector="all">Tutti</button>
          <button class="pill" data-sector="rettifica">Rettifica</button>
          <button class="pill" data-sector="montaggio">Montaggio</button>
        </div>
      </div>

      <div class="field checkbox">
        <label>
          <input type="checkbox" id="onlyLate" />
          <span>Solo in ritardo</span>
        </label>
      </div>

      <button id="btnClear" class="btn">Pulisci</button>
    </div>
  </section>

  <!-- KPI + grafico -->
  <section class="dashboard card">
    <div class="kpis">
      <div class="kpi">
        <div class="kpi-label">Linee</div>
        <div class="kpi-value" id="kpiLines">0</div>
      </div>
      <div class="kpi">
        <div class="kpi-label">Punteggio medio</div>
        <div class="kpi-value" id="kpiAvg">0%</div>
      </div>
      <div class="kpi">
        <div class="kpi-label">Azioni in ritardo</div>
        <div class="kpi-value" id="kpiLate">0</div>
      </div>
      <div class="zoomers">
        <button class="btn icon" id="zoomOut">âˆ’</button>
        <button class="btn icon" id="zoomIn">+</button>
      </div>
      <label class="stacked">
        <input type="checkbox" id="chkStacked" />
        <span>Stacked</span>
      </label>
    </div>

    <div class="chart-wrap">
      <canvas id="chart"></canvas>
    </div>

    <!-- Stato globale + selezione linee -->
    <div class="legend-row">
      <div class="states" id="states">
        <span class="state nc">0</span><small>Non conforme</small>
        <span class="state pa">1</span><small>Parziale</small>
        <span class="state qo">3</span><small>Quasi ok</small>
        <span class="state ok">5</span><small>Conforme</small>
      </div>
      <div class="lineChips" id="lineChips"></div>
    </div>

    <div class="row right gap">
      <button id="btnCollapseAll" class="btn">Comprimi tutto</button>
      <button id="btnExpandAll" class="btn">Espandi tutto</button>
    </div>
  </section>

  <!-- Container schede -->
  <section id="areas" class="areas"></section>

  <footer class="foot muted">
    <span>Â© SKF â€“ PWA offline</span>
    <span class="ver" id="appVersion">v7.10</span>
  </footer>

  <script src="app.js?v=7.10" defer></script>
  <script>
    // Registrazione SW (cache-bust con versione)
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('sw.js?v=7.10');
      });
    }
  </script>
</body>
</html>
