:root{
  --bg:#ffffff; --text:#0b3558; --muted:#5e7286;
  --panel:#f6f9fc; --panel-alt:#eef3f8; --outline:#d7e1ea;
  --accent:#0a66ff; --danger:#e45663; --ghost:#e7eef6;
  --c1:#8e66d9; --c2:#e24a4a; --c3:#f0b12b; --c4:#2fb064; --c5:#3b70ff;
}
:root.dark{
  --bg:#101722; --text:#e9f1ff; --muted:#a9b8c7;
  --panel:#172131; --panel-alt:#1d2a3f; --outline:#2a3950;
  --ghost:#21314a;
}
*{box-sizing:border-box}
html,body{height:100%}
body{margin:0;background:var(--bg);color:var(--text);font:14px/1.35 system-ui,Segoe UI,Roboto,Arial}
small{color:var(--muted)}
h1,h2{margin:0 0 8px}
h1 small{font-weight:600;margin-left:8px;opacity:.6}
.brand{display:flex;align-items:center;gap:14px;padding:8px 12px;border-bottom:1px solid var(--outline)}
.logo{height:32px}
.actions{margin-left:auto;display:flex;gap:8px;flex-wrap:wrap}
.btn{background:#fff;border:1px solid var(--outline);border-radius:12px;padding:8px 12px;cursor:pointer}
.btn.ghost{background:var(--ghost)}
.btn.danger{background:#ffedf0;border-color:#ffc6cc;color:#b10018}
.input{background:#fff;border:1px solid var(--outline);border-radius:12px;padding:10px 12px;min-width:220px}
.chk{display:flex;align-items:center;gap:8px}
.card{background:var(--panel);border:1px solid var(--outline);border-radius:16px;padding:12px;margin:12px auto;max-width:1100px}

.intro{display:grid;grid-template-columns:220px 1fr;gap:16px}
.intro_img img{width:100%;border-radius:14px;display:block;box-shadow:0 8px 24px rgba(0,0,0,.08)}
.legend5s{list-style:none;margin:8px 0 0;padding:0}
.legend5s li{margin:6px 0}
.badge{display:inline-flex;align-items:center;gap:6px;font-weight:700;border-radius:999px;padding:4px 10px;border:2px solid transparent;background:#fff}
.badge.sm{padding:4px 10px;font-weight:800}
.badge.s1{border-color:var(--c1);color:var(--c1)}
.badge.s2{border-color:var(--c2);color:var(--c2)}
.badge.s3{border-color:var(--c3);color:var(--c3)}
.badge.s4{border-color:var(--c4);color:var(--c4)}
.badge.s5{border-color:var(--c5);color:var(--c5)}

.controls .filters{display:grid;grid-template-columns:1fr 180px 180px auto auto;gap:10px}
.controls .quick{margin-top:10px}
.seg-tabs{display:flex;gap:8px}
.tab{background:#fff;border:1px solid var(--outline);border-radius:999px;padding:8px 12px;cursor:pointer}
.tab.active{outline:3px solid var(--accent);border-color:transparent}
.tab.s{display:inline-flex;align-items:center;gap:8px}
.tab.s .sval{padding:0 8px;border-radius:999px;background:#fff;border:1px solid var(--outline);color:var(--muted)}
.tab.s.active .sval{background:var(--panel-alt);color:var(--text);border-color:var(--accent)}

.dashboard .kpi{display:grid;grid-template-columns:repeat(3,1fr);gap:10px}
.kpi-box{background:var(--panel-alt);border:1px solid var(--outline);border-radius:14px;padding:12px}
.kpi-title{color:var(--muted)}
.kpi-val{font:800 24px/1 system-ui}

.chart-controls{display:flex;align-items:center;gap:12px;justify-content:flex-end;margin:8px 0}
.zoom .btn{width:36px}

.chart-scroll{overflow:auto;border:1px dashed var(--outline);border-radius:12px}
.chart-inner{min-width:820px}

.line-list{display:flex;gap:8px;flex-wrap:wrap;margin:10px 0}
.line-btn{border:1px solid var(--outline);background:#fff;border-radius:999px;padding:6px 10px;cursor:pointer}
.line-btn.active{background:var(--accent);color:#fff;border-color:transparent}

.late-wrap{display:flex;gap:8px;flex-wrap:wrap;margin:8px 0}
.late-chip{border:1px solid #f4c7c7;background:#fff0f0;border-radius:999px;padding:6px 10px;color:#a30014}
.late-chip .meta{color:#c25}

.areas{max-width:1100px;margin:0 auto}
.area_head{display:grid;grid-template-columns:1fr auto auto;gap:10px;align-items:center}
.area-line{background:#fff;border:1px solid var(--outline);border-radius:10px;padding:10px 12px;font-weight:700;min-width:160px}
.area .score{display:flex;align-items:center;gap:8px;color:var(--muted)}
.area .score b{color:var(--text)}
.head-actions{display:flex;gap:8px;justify-content:flex-end}
.panels{margin-top:8px}
.panel{display:none}
.panel.active{display:block}
.area.collapsed .panels{display:none}

.item{display:grid;grid-template-columns:36px 1fr auto 140px 130px 1fr 36px;gap:10px;align-items:center;background:#fff;border:1px solid var(--outline);border-radius:12px;padding:8px;margin:6px 0}
.item .i{border-radius:10px;border:1px solid var(--outline);background:var(--panel-alt);width:36px;height:36px}
.item .x{border-radius:10px;border:1px solid var(--outline);background:#ffeef0;color:#a01111;width:36px;height:36px}
.item .txt,.item .resp,.item .due,.item .note{border:1px solid var(--outline);border-radius:10px;padding:8px;background:#fff}
.points-dots{display:flex;gap:6px}
.points-dots .dot{width:36px;height:36px;border-radius:999px;border:2px solid var(--outline);background:#fff;cursor:pointer;font-weight:800}
.points-dots .dot[data-val="0"]{color:#778}
.points-dots .dot[data-val="1"]{border-color:#91a7ff;color:#1a3}
.points-dots .dot[data-val="3"]{border-color:#ffcf7a;color:#a60}
.points-dots .dot[data-val="5"]{border-color:#8ee1a8;color:#0a6}
.points-dots .dot.active{background:var(--panel-alt);box-shadow:inset 0 0 0 3px #fff}

.item.late{box-shadow:0 0 0 2px #ffb3b3 inset}
.desc{display:none;background:#0a59c9;color:#fff;border-radius:12px;padding:10px 12px;margin:0 0 10px}

.foot{max-width:1100px;margin:6px auto 24px;padding:0 12px;color:var(--muted);display:flex;justify-content:flex-end}

/* responsive */
@media (max-width:900px){
  .intro{grid-template-columns:1fr}
  .controls .filters{grid-template-columns:1fr 1fr;gap:8px}
  .item{grid-template-columns:36px 1fr auto 120px 1fr 36px;grid-auto-flow:row}
}
