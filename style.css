/* ================= SKF 5S – Light & Dark (v7.11.0) ================= */
:root{
  --bg:#ffffff; --text:#003366; --muted:#5c6f82;
  --card:#f3f7fa; --panel:#ffffff; --panel-alt:#eef4f8;
  --outline:#d0d7e1; --accent:#0095d9; --accent-alt:#4b88ff;
  --desc:#00599c; --kpi-bg:#eaf3f3;
  --c1:#7a56cc; --c2:#ef4343; --c3:#f3a11a; --c4:#35b468; --c5:#4b88ff;
}
:root.dark{
  --bg:#0f1a36; --text:#eaf0ff; --muted:#9bb0c5;
  --card:#182544; --panel:#1e2d4f; --panel-alt:#223a56;
  --outline:#3a4ab6; --accent:#4b88ff; --desc:#9bc2ff; --kpi-bg:#1b2b40;
}

*{box-sizing:border-box}
body{margin:0;font:16px/1.45 system-ui,Segoe UI,Roboto,Arial;background:var(--bg);color:var(--text)}
h1,h2,h3{margin:0 0 8px;font-weight:600}
a{color:var(--accent)}

.app-header{display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap;padding:12px 16px;background:var(--panel);border-bottom:2px solid var(--accent)}
.logo{display:flex;align-items:center;gap:10px}.logo img{height:38px}
.actions{display:flex;gap:6px;flex-wrap:wrap}

.btn{padding:6px 12px;border-radius:10px;border:1px solid var(--accent);background:var(--panel);color:var(--accent);font-weight:600;cursor:pointer;transition:.15s}
.btn:hover{background:var(--accent);color:#fff}.btn:focus{outline:2px solid var(--accent-alt);outline-offset:2px}
.btn.ghost{background:#fff;color:var(--accent)} .btn.danger{background:#f44767;border-color:#f44767;color:#fff}
.btn.danger:hover{background:#c53a54}.btn.tiny{padding:4px 8px;border-radius:8px}
.tab{padding:6px 12px;border:1px solid var(--outline);border-radius:20px;cursor:pointer;transition:.15s}
.tab:hover{box-shadow:0 0 0 3px rgba(0,149,217,.12) inset}
.tab.active{background:var(--accent);color:#fff}

.card{margin:16px auto;padding:16px;background:var(--panel);border-radius:16px;box-shadow:0 0 8px rgba(0,0,0,.08);border:1px solid var(--outline)}
.intro-grid{display:grid;grid-template-columns:280px 1fr;gap:18px;align-items:center;border-radius:18px;
  background:linear-gradient(180deg,#f6fbff 0%,#ffffff 100%)}
:root.dark .intro-grid{background:linear-gradient(180deg,#102347 0%,#1b2f5a 100%)}
.hero-img{max-width:100%;height:auto;border-radius:12px;filter:drop-shadow(0 4px 8px rgba(0,0,0,.1))}
.legend5s .tag{display:inline-block;padding:2px 10px;border-radius:999px;font-weight:600;margin:2px;color:#fff}
.tag[data-s="1S"]{background:var(--c1)} .tag[data-s="2S"]{background:var(--c2)}
.tag[data-s="3S"]{background:var(--c3)} .tag[data-s="4S"]{background:var(--c4)}
.tag[data-s="5S"]{background:var(--c5)}

.controls .filters{display:grid;grid-template-columns:1fr 220px auto auto auto auto;gap:10px;align-items:center}
.controls input,.controls select{padding:8px;border:1px solid var(--outline);border-radius:10px;background:#fff;color:var(--text)}
.sector-toggles .btn{margin-right:6px}

.kpis{display:flex;gap:12px;flex-wrap:wrap;justify-content:space-between}
.kpi{flex:1;text-align:center;padding:12px;border-radius:14px;background:var(--panel-alt);border:1px solid var(--outline)}
.kpi div:first-child{font-size:1.1rem;font-weight:700}

.chart-toolbar{display:flex;align-items:center;justify-content:space-between;margin:6px 0 8px}
.chart-toolbar .left{display:flex;gap:6px}
.chart-toolbar .stacked{display:flex;align-items:center;gap:8px;font-weight:600;color:var(--muted)}
.chart-scroll{overflow-x:auto;overscroll-behavior-x:contain;padding-bottom:8px}
.chart-inner{min-width:100%}

.line-buttons{display:flex;gap:8px;flex-wrap:wrap;margin-top:10px}
.line-btn{padding:6px 10px;border-radius:999px;cursor:pointer;border:2px solid var(--accent);color:var(--accent);background:#fff;font-weight:600}
.line-btn:hover{background:var(--accent);color:#fff}
.line-btn.active{background:var(--accent);color:#fff;box-shadow:0 0 0 3px rgba(0,149,217,.12) inset}

.global-toggle{display:flex;gap:8px;justify-content:flex-end;margin-top:10px}

.score-legend{display:flex;gap:12px;align-items:center;margin:10px 0;color:var(--muted);font-weight:600}
.score-legend span{display:inline-grid;place-items:center;width:22px;height:22px;border-radius:50%;border:2px solid var(--outline)}
.dot0{border-color:#666;color:#666}.dot1{border-color:var(--c1);color:var(--c1)}
.dot3{border-color:var(--c3);color:var(--c3)}.dot5{border-color:var(--c4);color:var(--c4)}

.area-head{display:flex;align-items:flex-start;justify-content:space-between;gap:20px;flex-wrap:wrap;margin-bottom:8px}
.area-head .lbl{font-size:.85rem;color:var(--muted)}.area-actions .btn{margin-left:6px}
.area-metrics{display:flex;gap:16px;align-items:center}

.badge-s{padding:2px 8px;border-radius:10px;font-size:.85rem;font-weight:700;white-space:nowrap}
.badge-s[data-s="1S"]{border:2px solid var(--c1);color:var(--c1)}
.badge-s[data-s="2S"]{border:2px solid var(--c2);color:var(--c2)}
.badge-s[data-s="3S"]{border:2px solid var(--c3);color:var(--c3)}
.badge-s[data-s="4S"]{border:2px solid var(--c4);color:var(--c4)}
.badge-s[data-s="5S"]{border:2px solid var(--c5);color:var(--c5)}

.sector-tabs{display:flex;gap:8px;margin:8px 0}
.s-tabs{display:flex;gap:8px;margin:8px 0}
.s-panels .panel{display:none}.s-panels .panel.active{display:block}

.area.collapsed .sector-tabs,.area.collapsed .s-tabs,.area.collapsed .s-panels,.area.collapsed .desc-show{display:none}
.area.collapsed .area-actions .collapse{background:var(--accent);color:#fff}

.item{display:grid;gap:8px;align-items:center;grid-template-columns:auto 1fr auto auto 1fr auto;border:1px dashed var(--outline);padding:10px;border-radius:12px;margin-bottom:8px;background:var(--panel-alt)}
.item .txt{padding:8px;border-radius:6px;border:1px solid var(--outline)}
.item .resp,.item .due,.item .note{padding:6px;border:1px solid var(--outline);border-radius:6px}
.item .del{color:#f44767;cursor:pointer;font-weight:700;text-align:center}.item .del:hover{color:#fff;background:#f44767;border-radius:6px}

/* Pallini punteggio — classi fisse + stato active */
.points-dots{display:flex;gap:6px;flex-wrap:wrap;justify-content:flex-end}
.dot{width:28px;height:28px;line-height:28px;text-align:center;border-radius:50%;border:2px solid var(--outline);font-weight:700;cursor:pointer;transition:.12s;color:var(--muted);background:#fff}
.dot.v0{border-color:#666;color:#666}
.dot.v1{border-color:var(--c1);color:var(--c1)}
.dot.v3{border-color:var(--c3);color:var(--c3)}
.dot.v5{border-color:var(--c4);color:var(--c4)}
.dot.v0.active{background:#666;color:#fff;border-color:#666}
.dot.v1.active{background:var(--c1);color:#fff;border-color:var(--c1)}
.dot.v3.active{background:var(--c3);color:#fff;border-color:var(--c3)}
.dot.v5.active{background:var(--c4);color:#fff;border-color:var(--c4)}

.desc-show{background:#4a90e2;color:#fff;padding:12px;border-radius:10px;margin-top:8px;font-size:.9rem}
.item.flash{animation:flash 1.2s ease 1}
@keyframes flash{0%{box-shadow:0 0 0 rgba(0,0,0,0)}20%{box-shadow:0 0 0 4px rgba(255,80,80,.35)}100%{box-shadow:0 0 0 rgba(0,0,0,0)}}

footer{text-align:center;padding:12px;font-size:.85rem;color:var(--muted)}

@media (max-width:920px){.intro-grid{grid-template-columns:1fr}.hero-img{max-width:320px;margin-inline:auto}}
@media (max-width:540px){.card{margin:10px 8px;padding:10px}.controls .filters{grid-template-columns:1fr 1fr auto auto auto auto}}
@media (max-width:480px){
  .item{grid-template-columns:1fr auto;grid-template-areas:"title points" "resp  due" "note  del";gap:8px}
  .item .txt{grid-area:title}.item .resp{grid-area:resp}.item .due{grid-area:due}.item .note{grid-area:note}.item .del{grid-area:del;justify-self:end}
  .points-dots{grid-area:points}.points-dots .dot{width:24px;height:24px;line-height:24px;font-size:.85rem}
}
