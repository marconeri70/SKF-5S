:root{
  --brand:#0d63d6;
  --bg:#f4f7fb;
  --card:#fff;
  --muted:#6b7785;
  --s1:#7c4dff; --s2:#e74c3c; --s3:#f39c12; --s4:#27ae60; --s5:#2e6df6;
  --shadow:0 6px 18px rgba(13,99,214,.12);
  --radius:14px;
}

*{box-sizing:border-box}
html,body{margin:0;padding:0;background:var(--bg);color:#0b1220;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial}
img{max-width:100%;display:block}

.appbar{position:sticky;top:0;z-index:10;background:linear-gradient(90deg,#0d63d6,#0b5ccd);color:#fff;padding:.6rem .9rem;box-shadow:var(--shadow);display:flex;align-items:center;justify-content:space-between;gap:.6rem}
.brand{display:flex;align-items:center;gap:.55rem}
.brand-logo{width:28px;height:28px}
.brand-title{font-weight:700}
.brand-badge{background:rgba(255,255,255,.14);padding:.2rem .5rem;border-radius:999px;font-size:.85rem}
.actions{display:flex;flex-wrap:wrap;gap:.5rem;align-items:center}

.btn{padding:.55rem .9rem;border-radius:999px;border:0;background:#e9efff;color:#0b1220;cursor:pointer}
.btn.primary{background:#fff}
.btn.outline{background:transparent;border:2px solid #fff;color:#fff}
.btn.ghost{background:rgba(255,255,255,.14);color:#fff}
.btn.link{background:#fff}
.btn.icon{width:40px;min-width:40px;text-align:center}
.btn.back{background:#fff}
.btn[disabled]{opacity:.45;cursor:not-allowed}

.container{max-width:1100px;margin:1rem auto;padding:0 1rem}
.card{background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow);padding:1rem;margin-bottom:1rem}
.card-head{display:flex;align-items:center;justify-content:space-between;margin-bottom:.6rem}
.split{display:grid;grid-template-columns:1fr 360px;gap:1rem}
.img-col{display:flex;align-items:center;justify-content:center}
.hero5s{width:300px;filter:drop-shadow(0 10px 18px rgba(0,0,0,.15))}
.what5s{padding-left:1rem}
.what5s li{margin:.55rem 0}

.pill{padding:.15rem .55rem;border-radius:999px;color:#fff;font-weight:700;white-space:nowrap}
.pill.s1{background:var(--s1)} .pill.s2{background:var(--s2)} .pill.s3{background:var(--s3)} .pill.s4{background:var(--s4)} .pill.s5{background:var(--s5)}
.dot{display:inline-block;width:.8rem;height:.8rem;border-radius:999px;margin:0 .35rem -.1rem .9rem}
.dot.s1{background:var(--s1)} .dot.s2{background:var(--s2)} .dot.s3{background:var(--s3)} .dot.s4{background:var(--s4)} .dot.s5{background:var(--s5)}

.chart-wrap{padding:.5rem 0}
.scroll-x{overflow-x:auto}
#allChart{min-width:720px}

.legend{color:var(--muted);font-size:.95rem;margin:.25rem 0 0}
.chips{display:flex;flex-wrap:wrap;gap:.5rem;margin-top:.75rem}
.chip{background:#e9efff;border:0;border-radius:999px;padding:.45rem .8rem;cursor:pointer}
.chip:hover{filter:brightness(.95)}

.stack{display:flex;flex-direction:column;gap:1rem}
.card-line{background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow);padding:1rem}
.card-line .top{display:grid;grid-template-columns:1fr auto auto auto;gap:1rem;align-items:center}
.pills{display:flex;flex-wrap:wrap;gap:.4rem}
.badge{background:#ecf2ff;padding:.25rem .6rem;border-radius:999px}

.note{background:#fff;border-radius:12px;padding:1rem;margin:.7rem 0;box-shadow:var(--shadow)}
.muted{color:var(--muted)}
.footer-actions{margin-top:.8rem}
.version{color:var(--muted);text-align:center;margin:1.2rem 0}

@media (max-width:900px){
  .split{grid-template-columns:1fr}
  .img-col{order:-1}
  .hero5s{width:220px;margin:0 auto}
  .card-line .top{grid-template-columns:1fr;gap:.6rem}
}

/* PRINT */
@media print{
  body.print-single .card-line:not(.print-target){display:none}
  header,.version{display:none}
  .card-line{box-shadow:none;margin:0}
}

/* LOCKED: disabilito i controlli marcati .lockable */
body.locked .lockable{pointer-events:none}
